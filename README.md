# Домашнее задание к занятию 3 «Резервное копирование»

## ` Климов Дмитрий  `

## Задание 1

1. Составьте команду rsync, которая позволяет создавать зеркальную копию домашней директории пользователя в директорию /tmp/backup
2. Необходимо исключить из синхронизации все директории, начинающиеся с точки (скрытые)
3. Необходимо сделать так, чтобы rsync подсчитывал хэш-суммы для всех файлов, даже если их время модификации и размер идентичны в источнике и приемнике.
На проверку направить скриншот с командой и результатом ее выполнения

## Ответ:

![Снимок экрана (1068)](https://github.com/user-attachments/assets/ec33d4d1-f979-4ca3-ad5b-0d6fe9049bf3)

![Снимок экрана (1069)](https://github.com/user-attachments/assets/9c6a93a7-3614-4f94-a618-363e0fca88e4)

![Снимок экрана (1070)](https://github.com/user-attachments/assets/8435e265-0064-4ca4-8502-8fd3df19cf85)


## Задание 2

1. Написать скрипт и настроить задачу на регулярное резервное копирование домашней директории пользователя с помощью rsync и cron.
2. Резервная копия должна быть полностью зеркальной
3. Резервная копия должна создаваться раз в день, в системном логе должна появляться запись об успешном или неуспешном выполнении операции
4. Резервная копия размещается локально, в директории /tmp/backup
На проверку направить файл crontab и скриншот с результатом работы утилиты.

## Ответ:

` /usr/local/bin/backup_script.sh `

```
#!/bin/bash

# Директория для резервной копии
BACKUP_DIR="/tmp/backup"

# Домашняя директория пользователя
HOME_DIR="/home/$USER"

# Лог-файл
LOG_FILE="/var/log/backup.log"

# Дата и время для записи в лог
TIMESTAMP=$(date +'%Y-%m-%d %H:%M:%S')

# Команда rsync для создания зеркальной резервной копии
RSYNC_COMMAND="rsync -av --delete --checksum --exclude '.*' $HOME_DIR/ $BACKUP_DIR"

# Выполнение резервного копирования
$RSYNC_COMMAND

# Проверка статуса выполнения rsync
if [ $? -eq 0 ]; then
  echo "$TIMESTAMP: Резервное копирование выполнено успешно." >> $LOG_FILE
else
  echo "$TIMESTAMP: Ошибка при выполнении резервного копирования." >> $LOG_FILE
fi


```


